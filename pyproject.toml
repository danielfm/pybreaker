[tool.pyprojectx]
[tool.pyprojectx.main]
requirements = ["pre-commit<=3.6", "black", "isort", "mypy", "px-utils"]
post-install = "pre-commit install"

[tool.pyprojectx.venv]
dir = "@PROJECT_DIR/venv"
requirements = ["setuptools", "pytest", "mock", "tornado", "redis", "fakeredis", "types-mock", "types-redis", "-e ."]

[tool.pyprojectx.aliases]
install = "pw@ --install-context venv"
format = ["@install", "black src tests", "isort src tests"]
lint = ["@install", "mypy --python-executable venv/bin/python --no-incremental"]
test = { cmd = "pytest", ctx = "venv" }
clean = "pxrm .eggs venv src/pybreaker.egg-info"

[tool.mypy]
disallow_untyped_defs = true
ignore_missing_imports = true
no_implicit_optional = true
show_error_codes = true
files = ["src/pybreaker", "src/typechecks.py"]

[tool.isort]
profile = "black"
